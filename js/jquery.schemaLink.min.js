/* jquery.schemaLink 0.1.0 | MIT
 * https://github.com/johnrobertallan/schemaLink
 */
!function(a){"use strict";a.fn.schemaLink=function(b){var c={},d=a.extend({title:"link to more information","class":"schemaLink",openInNewWindow:!0,reuseWindow:!0,windowName:"schemaLinkWindow",dataAttribute:"itemprop",dataTemplate:{streetAddress:null,addressLocality:null,addressRegion:null,postalCode:null,addressCountry:null},defaultDeviceName:"default",urlTemplates:{"default":"http://maps.google.com?q={streetAddress} {addressLocality} {addressRegion} {postalCode} {addressCountry}",ios:"http://maps.apple.com?saddr=Current Location&daddr={streetAddress} {addressLocality} {addressRegion} {postalCode} {addressCountry}",android:"geo:0,0?q={streetAddress} {addressLocality} {addressRegion} {postalCode} {addressCountry}",wp7:"maps:{streetAddress} {addressLocality} {addressRegion} {postalCode} {addressCountry}",wp8:"maps:?where={streetAddress} {addressLocality} {addressRegion} {postalCode} {addressCountry}",blackberry:'javascript:blackberry.launch.newMap({"address":{"address1":"{streetAddress}","city":"{addressLocality}","country":"{addressCountry}","stateProvince":"{addressRegion}","zipPostal":"{postalCode}"}});'},deviceMap:[{name:"ios",test:/ipad|ipod|iphone/},{name:"android",test:/android/},{name:"blackberry",test:/blackberry/},{name:"wp7",test:/windows phone os 7/},{name:"wp8",test:/windows phone 8/}],deviceType:null},b);return c.JSONStringBuilder=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a=a.replace("{"+c+"}",b[c]));return a},c.buildURL=function(a,b){var e,f;return e=d.urlTemplates[a],f=c.JSONStringBuilder(e,b),f=encodeURI(f)},c.getSchemaData=function(a){var b,c;b=d.dataTemplate;for(c in b)b.hasOwnProperty(c)&&(b[c]=a.find("["+d.dataAttribute+'="'+c+'"]').text());return b},c.getDeviceType=function(){var a,b,c,e,f;for(a=window.navigator.userAgent.toLowerCase(),c=0,e=d.deviceMap.length,f=d.defaultDeviceName,c;e>c;c+=1)if(b=new RegExp(d.deviceMap[c].test),b.test(a)){f=d.deviceMap[c].name;break}return f},null===d.deviceType&&(d.deviceType=c.getDeviceType()),this.each(function(){var b,e,f,g;b=a(this),g=c.getSchemaData(b),f=c.buildURL(d.deviceType,g),e=a("<a>").attr({href:f,title:d.title,"class":d.class,target:d.openInNewWindow?d.reuseWindow?d.windowName:"_blank":"_self"}),b.wrapInner(e)})}}(jQuery);